// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.9.1

//# unitInfo: Provides: Ppx_module_timer_runtime
//# unitInfo: Requires: Base, Base__Int, Base__Int63, Base__List, Base__Option, Base__Printf, Base__String, CamlinternalLazy, Stdio, Stdlib, Stdlib__Gc, Stdlib__Sys, Time_now
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst$4 = "",
    cst_PPX_MODULE_TIMER = "PPX_MODULE_TIMER",
    cst_ns$1 = "ns",
    cst_runtime_ppx_module_timer_r = "runtime/ppx_module_timer_runtime.ml",
    caml_gc_quick_stat = runtime.caml_gc_quick_stat,
    caml_maybe_attach_backtrace = runtime.caml_maybe_attach_backtrace;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) === 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) === 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    cst$3 = "\n",
    cst$1 = " ",
    cst$2 = cst$4,
    cst$0 = cst$4,
    cst = cst$4,
    am_recording_environment_varia = cst_PPX_MODULE_TIMER,
    Base = global_data.Base,
    Base_List = global_data.Base__List,
    Base_String = global_data.Base__String,
    Base_Int63 = global_data.Base__Int63,
    Stdio = global_data.Stdio,
    Base_Option = global_data.Base__Option,
    CamlinternalLazy = global_data.CamlinternalLazy,
    Base_Printf = global_data.Base__Printf,
    Base_Int = global_data.Base__Int,
    Time_now = global_data.Time_now,
    Assert_failure = global_data.Assert_failure,
    Stdlib = global_data.Stdlib;
   a:
   {
    var
     cst_ppx_module_timer_overridin =
       "ppx_module_timer: overriding time measurements for testing",
     _e_ = [0, [11, "Line ", [4, 0, 0, 0, 0]], "Line %d"],
     _f_ =
       [0, [11, "Fake__Dependency_", [4, 0, 0, 0, 0]], "Fake__Dependency_%d"],
     _d_ = [0, [2, [1, 1], [12, 32, [2, 0, 0]]], "%*s %s"],
     cst_compactions = "compactions",
     cst_major_collections = "major collections",
     cst_minor_collections = "minor collections",
     _c_ = [0, ", "],
     cst_GC = "; GC: ",
     _b_ = [0, cst_runtime_ppx_module_timer_r, 110, 6],
     _a_ = [0, cst_runtime_ppx_module_timer_r, 94, 6],
     cst_ns$0 = cst_ns$1,
     cst_ns = cst_ns$1;
    try{var value = runtime.caml_sys_getenv(cst_PPX_MODULE_TIMER);}
    catch(_M_){var am_recording_value = 0; break a;}
    var am_recording_value = [0, value];
   }
   var am_recording = caml_call1(Base_Option[51], am_recording_value);
   function to_nanoseconds(t){return t;}
   function of_nanoseconds(t){return t;}
   function of_string(string){
    var _L_ = caml_call2(Base_String[111], string, cst_ns);
    return caml_call1(Base_Int63[10], _L_);
   }
   function to_string(nanos){
    var _K_ = caml_call1(Base_Int63[11], nanos);
    return caml_call2(Base[212], _K_, cst_ns$0);
   }
   function to_string_with_same_unit(list){
    return caml_call2(Base_List[52], list, to_string);
   }
   var format = [0, [0, of_string, to_string_with_same_unit]];
   function create(nested_timer, param){
    var _J_ = caml_gc_quick_stat(0);
    return [0, cst, Base_Int63[39], _J_, nested_timer, 0];
   }
   function record_start(t, description){
    if(am_recording){
     if(! caml_call1(Base_String[14], t[1]))
      throw caml_maybe_attach_backtrace([0, Assert_failure, _a_], 1);
     t[1] = description;
     t[3] = caml_gc_quick_stat(0);
     t[2] = caml_call1(Time_now[1], 0);
     var _I_ = 0;
    }
    else
     var _I_ = am_recording;
    return _I_;
   }
   function record_until(t, description){
    if(! am_recording) return am_recording;
    var
     until = caml_call1(Time_now[1], 0),
     start = t[2],
     gc_stats_after = caml_gc_quick_stat(0),
     gc_stats_before = t[3],
     runtime = caml_call2(Base_Int63[43], until, start);
    if(! caml_call2(Base_String[131], t[1], description))
     throw caml_maybe_attach_backtrace([0, Assert_failure, _b_], 1);
    var
     gc_events =
       [0,
        gc_stats_after[4] - gc_stats_before[4] | 0,
        gc_stats_after[5] - gc_stats_before[5] | 0,
        gc_stats_after[14] - gc_stats_before[14] | 0],
     match$0 = t[4];
    if(match$0)
     var
      nested$0 = match$0[1],
      nested_timing_events = caml_call1(Base_List[61], nested$0[5]);
    else
     var nested_timing_events = 0;
    var
     timing_event = [0, description, runtime, gc_events, nested_timing_events];
    t[5] = [0, timing_event, t[5]];
    t[1] = cst$0;
    t[2] = Base_Int63[39];
    var match = t[4];
    if(! match) return 0;
    var nested = match[1];
    nested[5] = 0;
    return 0;
   }
   var
    definition_timer = create(0, 0),
    module_timer = create([0, definition_timer], 0);
   function record_start$0(module_name){
    return record_start(module_timer, module_name);
   }
   function record_until$0(module_name){
    return record_until(module_timer, module_name);
   }
   function record_definition_start(loc){
    return record_start(definition_timer, loc);
   }
   function record_definition_until(loc){
    return record_until(definition_timer, loc);
   }
   function timing_events_to_strings(list, indent){
    var
     string =
       caml_call2
        (Base_List[52], list, function(timing_event){return timing_event[2];}),
     Format = format[1],
     duration_strings = caml_call1(Format[2], string),
     prefix = caml_call2(Base_String[65], indent, 32),
     list$0 =
       caml_call3
        (Base_List[96],
         duration_strings,
         list,
         function(duration_string, param){
          var
           nested_timing_events = param[4],
           gc_events = param[3],
           description = param[1],
           _B_ =
             timing_events_to_strings(nested_timing_events, indent + 4 | 0),
           _C_ =
             caml_call2
              (Base_List[52],
               _B_,
               function(line){return caml_call2(Base[212], cst$3, line);}),
           _D_ = caml_call2(Base_String[67], 0, _C_),
           compactions = gc_events[3],
           major_collections = gc_events[2],
           minor_collections = gc_events[1];
          function to_list(description, count){
           if(0 === count) return 0;
           var
            _G_ = caml_call2(Base[212], cst$1, description),
            _H_ = caml_call1(Base_Int[12], count);
           return [0, caml_call2(Base[212], _H_, _G_), 0];
          }
          var
           _w_ = to_list(cst_compactions, compactions),
           _x_ = to_list(cst_major_collections, major_collections),
           _y_ = caml_call2(Base[193], _x_, _w_),
           _z_ = to_list(cst_minor_collections, minor_collections),
           strings = caml_call2(Base[193], _z_, _y_);
          if(caml_call1(Base_List[18], strings))
           var _E_ = cst$2;
          else
           var
            _A_ = caml_call2(Base_String[67], _c_, strings),
            _E_ = caml_call2(Base[212], cst_GC, _A_);
          var _F_ = caml_call2(Base[212], _E_, _D_);
          return [0, duration_string, caml_call2(Base[212], description, _F_)];
         }),
     left_column_width =
       caml_call3
        (Base_List[20],
         list$0,
         0,
         function(width, param){
          var left = param[1];
          return caml_call2
                  (Base_Int[16], width, runtime.caml_ml_string_length(left));
         }),
     _v_ =
       caml_call2
        (Base_List[52],
         list$0,
         function(param){
          var right = param[2], left = param[1];
          return caml_call4
                  (Base_Printf[2], _d_, left_column_width, left, right);
         });
    return caml_call2
            (Base_List[52],
             _v_,
             function(line){return caml_call2(Base[212], prefix, line);});
   }
   function gc_events(i){
    var
     _s_ = 7 === caml_call2(Base[198], i, 8) ? 1 : 0,
     _t_ = 3 === caml_call2(Base[198], i, 4) ? 1 : 0,
     _u_ = 1 === caml_call2(Base[198], i, 2) ? 1 : 0;
    return [0, _u_, _t_, _s_];
   }
   var
    fake_timing_events =
      [246,
       function(_m_){
        return caml_call2
                (Base_List[40],
                 12,
                 function(i){
                  var
                   _n_ =
                     0 === caml_call2(Base[198], i + 1 | 0, 4)
                      ? caml_call2
                        (Base_List[40],
                         i + 1 | 0,
                         function(j){
                          var
                           _q_ = gc_events(j),
                           _r_ = caml_call1(Base_Int63[97], 900 * (j + 1 | 0) | 0);
                          return [0,
                                  caml_call2(Base_Printf[2], _e_, j + 1 | 0),
                                  _r_,
                                  _q_,
                                  0];
                         })
                      : 0,
                   _o_ = gc_events(i),
                   _p_ = caml_call1(Base_Int63[97], 900 * (i + 1 | 0) | 0);
                  return [0,
                          caml_call2(Base_Printf[2], _f_, i + 1 | 0),
                          _p_,
                          _o_,
                          _n_];
                 });
       }];
   if(am_recording)
    caml_call1
     (Stdlib[100],
      function(param){
       var timing_events$0 = caml_call1(Base_List[61], module_timer[5]);
       function notify_of_overriding(param){
        return caml_call1(Stdio[9], cst_ppx_module_timer_overridin);
       }
       var string = caml_call4(Base_Option[29], 0, 0, 0, am_recording_value);
       a:
       if(string !== "FAKE_MODULES"){
        try{var Format = format[1], override = caml_call1(Format[1], string);}
        catch(_l_){var timing_events = timing_events$0; break a;}
        notify_of_overriding(0);
        var
         timing_events =
           caml_call2
            (Base_List[41],
             timing_events$0,
             function(index, timing_event){
              var
               _j_ = caml_call1(Base_Int63[97], index + 1 | 0),
               runtime = caml_call2(Base_Int63[44], override, _j_),
               nested_timing_events =
                 caml_call2
                  (Base_List[41],
                   timing_event[4],
                   function(index, nested_timing_event){
                    var
                     _k_ = caml_call1(Base_Int63[97], index + 1 | 0),
                     runtime = caml_call2(Base_Int63[44], override, _k_);
                    return [0,
                            nested_timing_event[1],
                            runtime,
                            nested_timing_event[3],
                            nested_timing_event[4]];
                   });
              return [0,
                      timing_event[1],
                      runtime,
                      timing_event[3],
                      nested_timing_events];
             });
       }
       else{
        notify_of_overriding(0);
        var _h_ = runtime.caml_obj_tag(fake_timing_events);
        b:
        if(250 === _h_)
         var _i_ = fake_timing_events[1];
        else{
         if(246 !== _h_ && 244 !== _h_){
          var _i_ = fake_timing_events;
          break b;
         }
         var _i_ = caml_call1(CamlinternalLazy[2], fake_timing_events);
        }
        var timing_events = _i_;
       }
       var _g_ = timing_events_to_strings(timing_events, 0);
       return caml_call2(Base_List[19], _g_, Stdio[9]);
      });
   var
    Ppx_module_timer_runtime =
      [0,
       am_recording,
       am_recording_environment_varia,
       [0, to_nanoseconds, of_nanoseconds, format],
       record_start$0,
       record_until$0,
       record_definition_start,
       record_definition_until];
   runtime.caml_register_global
    (32, Ppx_module_timer_runtime, "Ppx_module_timer_runtime");
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHB4X21vZHVsZV90aW1lcl9ydW50aW1lLmNtYS5qcyIsInNlY3Rpb25zIjpbeyJvZmZzZXQiOnsibGluZSI6OSwiY29sdW1uIjowfSwibWFwIjp7InZlcnNpb24iOjMsImZpbGUiOiJwcHhfbW9kdWxlX3RpbWVyX3J1bnRpbWUuY21hLmpzIiwibmFtZXMiOlsicnVudGltZSIsImNzdCIsImNzdF9QUFhfTU9EVUxFX1RJTUVSIiwiY3N0X25zIiwiY3N0X3J1bnRpbWVfcHB4X21vZHVsZV90aW1lcl9yIiwiY2FtbF9nY19xdWlja19zdGF0IiwiY2FtbF9tYXliZV9hdHRhY2hfYmFja3RyYWNlIiwiY2FtbF9jYWxsMSIsImYiLCJhMCIsImNhbWxfY2FsbDIiLCJhMSIsImNhbWxfY2FsbDMiLCJhMiIsImNhbWxfY2FsbDQiLCJhMyIsImdsb2JhbF9kYXRhIiwiYW1fcmVjb3JkaW5nX2Vudmlyb25tZW50X3ZhcmlhIiwiQmFzZSIsIkJhc2VfTGlzdCIsIkJhc2VfU3RyaW5nIiwiQmFzZV9JbnQ2MyIsIlN0ZGlvIiwiQmFzZV9PcHRpb24iLCJDYW1saW50ZXJuYWxMYXp5IiwiQmFzZV9QcmludGYiLCJCYXNlX0ludCIsIlRpbWVfbm93IiwiQXNzZXJ0X2ZhaWx1cmUiLCJTdGRsaWIiLCJjc3RfcHB4X21vZHVsZV90aW1lcl9vdmVycmlkaW4iLCJjc3RfY29tcGFjdGlvbnMiLCJjc3RfbWFqb3JfY29sbGVjdGlvbnMiLCJjc3RfbWlub3JfY29sbGVjdGlvbnMiLCJjc3RfR0MiLCJ2YWx1ZSIsImFtX3JlY29yZGluZ192YWx1ZSIsImFtX3JlY29yZGluZyIsInRvX25hbm9zZWNvbmRzIiwidCIsIm9mX25hbm9zZWNvbmRzIiwib2Zfc3RyaW5nIiwic3RyaW5nIiwidG9fc3RyaW5nIiwibmFub3MiLCJ0b19zdHJpbmdfd2l0aF9zYW1lX3VuaXQiLCJsaXN0IiwiZm9ybWF0IiwiY3JlYXRlIiwibmVzdGVkX3RpbWVyIiwicGFyYW0iLCJyZWNvcmRfc3RhcnQiLCJkZXNjcmlwdGlvbiIsInJlY29yZF91bnRpbCIsInVudGlsIiwic3RhcnQiLCJnY19zdGF0c19hZnRlciIsImdjX3N0YXRzX2JlZm9yZSIsImdjX2V2ZW50cyIsIm1hdGNoIiwibmVzdGVkIiwibmVzdGVkX3RpbWluZ19ldmVudHMiLCJ0aW1pbmdfZXZlbnQiLCJkZWZpbml0aW9uX3RpbWVyIiwibW9kdWxlX3RpbWVyIiwibW9kdWxlX25hbWUiLCJyZWNvcmRfZGVmaW5pdGlvbl9zdGFydCIsImxvYyIsInJlY29yZF9kZWZpbml0aW9uX3VudGlsIiwidGltaW5nX2V2ZW50c190b19zdHJpbmdzIiwiaW5kZW50IiwiRm9ybWF0IiwiZHVyYXRpb25fc3RyaW5ncyIsInByZWZpeCIsImR1cmF0aW9uX3N0cmluZyIsImxpbmUiLCJjb21wYWN0aW9ucyIsIm1ham9yX2NvbGxlY3Rpb25zIiwibWlub3JfY29sbGVjdGlvbnMiLCJ0b19saXN0IiwiY291bnQiLCJzdHJpbmdzIiwibGVmdF9jb2x1bW5fd2lkdGgiLCJ3aWR0aCIsImxlZnQiLCJyaWdodCIsImkiLCJmYWtlX3RpbWluZ19ldmVudHMiLCJqIiwidGltaW5nX2V2ZW50cyIsIm5vdGlmeV9vZl9vdmVycmlkaW5nIiwib3ZlcnJpZGUiLCJpbmRleCIsIm5lc3RlZF90aW1pbmdfZXZlbnQiLCJQcHhfbW9kdWxlX3RpbWVyX3J1bnRpbWUiXSwic291cmNlcyI6WyIvYnVpbHRpbi9ibGFja2JveC5tbCIsIi9Vc2Vycy95YW5uaWNrLy5vcGFtL2JvbnNhaS1mcm9udGVuZC9saWIvcHB4X21vZHVsZV90aW1lci9ydW50aW1lL3BweF9tb2R1bGVfdGltZXJfcnVudGltZS5tbCJdLCJtYXBwaW5ncyI6IklBQUFBLFVBQUE7QUFBQSxJQUFBQyxRQUFBO0FBQUEsSUFBQUMsdUJBQUE7QUFBQSxJQUFBQyxXQUFBO0FBQUEsSUFBQUMsaUNBQUE7QUFBQSxJQUFBQyxxQkFBQTtBQUFBLElBQUFDLDhCQUFBO0FBQUEsWUFBQUMsV0FBQUMsR0FBQUM7QUFBQUEsSUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFlBQUFDLFdBQUFGLEdBQUFDLElBQUFFO0FBQUFBLElBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxZQUFBQyxXQUFBSixHQUFBQyxJQUFBRSxJQUFBRTtBQUFBQSxJQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsWUFBQUMsV0FBQU4sR0FBQUMsSUFBQUUsSUFBQUUsSUFBQUU7QUFBQUEsSUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUMsY0FBQTtBQUFBLElBQUFmLFFBQUE7QUFBQSxJQUFBQSxRQUFBO0FBQUEsSUFBQUEsUUFBQTtBQUFBLElBQUFBLFFBQUE7QUFBQSxJQUFBQSxNQUFBO0FBQUEsSUFBQWdCLGlDQUFBO0FBQUEsSUFBQUMsT0FBQTtBQUFBLElBQUFDLFlBQUE7QUFBQSxJQUFBQyxjQUFBO0FBQUEsSUFBQUMsYUFBQTtBQUFBLElBQUFDLFFBQUE7QUFBQSxJQUFBQyxjQUFBO0FBQUEsSUFBQUMsbUJBQUE7QUFBQSxJQUFBQyxjQUFBO0FBQUEsSUFBQUMsV0FBQTtBQUFBLElBQUFDLFdBQUE7QUFBQSxJQUFBQyxpQkFBQTtBQUFBLElBQUFDLFNBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUFBQztBQUFBQSxPQ1NFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUFBQyxrQkFBQTtBQUFBLEtBQUFDLHdCQUFBO0FBQUEsS0FBQUMsd0JBQUE7QUFBQTtBQUFBLEtBQUFDLFNBQUE7QUFBQTtBQUFBO0FBQUEsS0FBQS9CLFdBQUE7QUFBQSxLQUFBQSxTQUFBO0FBQUEsWUFBQWdDLFFBQU07QUFBQSxtQkFBQUMscUJBRVc7QUFBQSxRQUFBQSxxQkFETjtBQUFBO0FBQUEsT0FBQUMsZUFLTTtBQUFBLFlBQUFDLGVBQUFDLEdBS00sU0FBQztBQUFBLFlBQUFDLGVBQUFELEdBQ0QsU0FBQztBQUFBLFlBQUFFLFVBQUFDO0FBQUFBLFFBQUEsTUFRQztBQUFBLElBQTBDLHNDQUFtQjtBQUFBO0FBQUEsWUFBQUMsVUFBQUM7QUFBQUEsUUFBQSxNQUM5RDtBQUFBLElBQXFCLDJDQUFPO0FBQUE7QUFBQSxZQUFBQyx5QkFBQUM7QUFBQUEsSUFDZCxpREFBMEI7QUFBQTtBQUFBLE9BQUFDLFNBaEJkO0FBQUEsWUFBQUMsT0FBQUMsY0FBQUM7QUFBQUEsUUFBQSxNQTZEakI7QUFBQSxJQUFnQjtBQUFBLEdBRzlDO0FBQUEsWUFBQUMsYUFBQVosR0FBQWE7QUFBQUEsSUFZRDtBQUFBLEtBRVM7QUFBQSxNQUFpRDtBQUFBLEtBQ3hEO0FBQUEsS0FDZ0M7QUFBQSxLQUVFO0FBQUEsZUFBd0M7QUFBQTtBQUFBO0FBQUEsZUFONUU7QUFBQTtBQUFBLEdBTTZFO0FBQUEsWUFBQUMsYUFBQWQsR0FBQWE7QUFBQUEsSUFJN0U7QUFBQTtBQUFBLEtBQUFFLFFBR2M7QUFBQSxLQUFBQyxRQUNaO0FBQUEsS0FBQUMsaUJBQ3FCO0FBQUEsS0FBQUMsa0JBQ3JCO0FBQUEsS0FBQXpELFVBQ2M7QUFBQSxJQUNQO0FBQUEsS0FBMEQ7QUFBQTtBQUFBLEtBQUEwRDtBQUFBQSxPQUNqRTtBQUFBO0FBQUE7QUFBQTtBQUFBLEtBQUFDLFVBUUE7QUFBQTtBQUFBO0FBQUEsTUFBQUMsV0FBQTtBQUFBLE1BQUFDLHVCQUdtQjtBQUFBO0FBQUEsU0FBQUEsdUJBRFA7QUFBQTtBQUFBLEtBQUFDLGVBR1o7QUFBQSxJQUdBO0FBQUEsSUEzQ0Y7QUFBQSxJQUNBO0FBQUEsUUFBQUgsUUFDQTtBQUFBLGdCQUNVO0FBQUEsUUFBQUMsU0FEVjtBQUFBLElBRWlCO0FBQUE7QUFBQSxHQXlDUDtBQUFBO0FBQUEsSUFBQUcsbUJBSVM7QUFBQSxJQUFBQyxlQUNKO0FBQUEsWUFBQWIsZUFBQWM7QUFBQUEsSUFDWSw4Q0FBMkM7QUFBQTtBQUFBLFlBQUFaLGVBQUFZO0FBQUFBLElBQzNDLDhDQUEyQztBQUFBO0FBQUEsWUFBQUMsd0JBQUFDO0FBQUFBLElBQ3hDLDBDQUF1QztBQUFBO0FBQUEsWUFBQUMsd0JBQUFEO0FBQUFBLElBQ3ZDLDBDQUF1QztBQUFBO0FBQUEsWUFBQUUseUJBQUF2QixNQUFBd0I7QUFBQUE7QUFBQUEsS0FBQTVCO0FBQUFBLE9BMEJyRTtBQUFBLHVDQUFBb0IsY0FBeUQsdUJBQW9CO0FBQUEsS0FBQVMsU0F6SDdFO0FBQUEsS0FBQUMsbUJBQ0E7QUFBQSxLQUFBQyxTQTJIVztBQUFBLEtBQUEzQjtBQUFBQSxPQUNiO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0JBQUE0QixpQkFBQXhCO0FBQUFBO0FBQUFBLFdBQUFXLHVCQUlJO0FBQUEsV0FBQUgsWUFBQTtBQUFBLFdBQUFOLGNBQUE7QUFBQTtBQUFBLGFBT1c7QUFBQTtBQUFBLGFBREg7QUFBQTtBQUFBO0FBQUEsd0JBQUF1QixNQUVtQix5Q0FBVztBQUFBLGlCQUhoQztBQUFBLFdBQUFDLGNBcENOO0FBQUEsV0FBQUMsb0JBQUE7QUFBQSxXQUFBQyxvQkFBQTtBQUFBLG1CQUFBQyxRQUFBM0IsYUFBQTRCO0FBQUFBLFdBR0YsZ0JBQWtCO0FBQUE7QUFBQSxrQkFBZ0M7QUFBQSxrQkFBdEI7QUFBQSx5REFBdUM7QUFBQSxVQUFFO0FBQUE7QUFBQSxpQkFLbkU7QUFBQSxpQkFEQTtBQUFBO0FBQUEsaUJBREY7QUFBQSxXQUFBQyxVQUFBO0FBQUEsVUFJQztBQUFBLHFCQUEyQjtBQUFBO0FBQUE7QUFBQSxrQkFBbUI7QUFBQSxrQkFBK0I7QUFBQSxvQkF5QnRFO0FBQUEsVUFERixvRUFLb0M7QUFBQSxTQUFHO0FBQUEsS0FBQUM7QUFBQUEsT0F4QjdDO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0JBQUFDLE9BQUFqQztBQUFBQSxjQUFBa0MsT0FBMEI7QUFBQSxVQUF3QjtBQUFBLDRFQUFtQztBQUFBO0FBQUE7QUFBQSxPQUV2RjtBQUFBO0FBQUE7QUFBQSxrQkFBQWxDO0FBQUFBLGNBQUFtQyxRQUFpQixVQUFBRCxPQUFBO0FBQUEsVUFDZjtBQUFBLHVFQUFxRDtBQUFBO0FBQUEsSUFzQnBCO0FBQUE7QUFBQTtBQUFBLHNCQUFBVCxNQUNQLDBDQUFhLEdBQUM7QUFBQTtBQUFBLFlBQUFqQixVQUFBNEI7QUFBQUE7QUFBQUEsS0FBQSxNQU9wQjtBQUFBLFdBRE07QUFBQSxXQURBO0FBQUEsSUFBSztBQUFBLEdBRzlCO0FBQUE7QUFBQSxJQUFBQztBQUFBQSxNQUVIO0FBQUE7QUFBQSxRRC9MRjtBQUFBO0FBQUE7QUFBQSwwQkFBQUQ7QUFBQUE7QUFBQUEsbUJBQUE7QUFBQSxxQkNxTWU7QUFBQSx3QkFFRDtBQUFBO0FBQUE7QUFBQSxrQ0FBQUU7QUFBQUE7QUFBQUEsMkJBQUEsTUFHZ0I7QUFBQSxpQ0FERjtBQUFBLDBCQURJO0FBQUE7QUFBQTtBQUFBO0FBQUEsb0NBQWdDO0FBQUEseUJBSS9DO0FBQUE7QUFBQSx5QkFUSTtBQUFBLHlCQURGO0FBQUEsa0JBREk7QUFBQTtBQUFBO0FBQUE7QUFBQSw4QkFBNEM7QUFBQSxpQkFhM0QsRUQ5TVI7QUFBQTtBQUFBLEdDK0xFO0FBQUEsSUFpREU7QUFBQTtBQUFBLGVBQUF0QztBQUFBQSxXQUFBdUMsa0JBRUk7QUFBQSxnQkFBQUMscUJBQUF4QztBQUFBQSxRQS9CSiwyREFBZ0Y7QUFBQTtBQUFBLFdBQUFSLFNBRzFFO0FBQUE7QUFBQTtBQUFBLFFBS0osUUFBQTZCLFNBdExGLFdBQUFvQixXQUNBO0FBQUEsdUJBQUFGLGdCQWtNb0I7QUFBQSxRQVhmO0FBQUE7QUFBQSxTQUFBQTtBQUFBQSxXQUNBO0FBQUE7QUFBQTtBQUFBLHNCQUFBRyxPQUFBOUI7QUFBQUE7QUFBQUEsZUFBQSxNQUNxQztBQUFBLGVBQUE5RCxVQUFyQjtBQUFBLGVBQUE2RDtBQUFBQSxpQkFFWjtBQUFBO0FBQUE7QUFBQSw0QkFBQStCLE9BQUFDO0FBQUFBO0FBQUFBLHFCQUFBLE1BR3VDO0FBQUEscUJBQUE3RixVQUFyQjtBQUFBLG9CQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFBb0M7QUFBQSxjQUUxQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFBbUQ7QUFBQTtBQUFBO0FBQUEsUUFmeEQ7QUFBQSxrQkFBdUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFlBQUF5RixnQkFBQTtBQUFBO0FBQUEsaUJBa0IzQjtBQUFBLE9BQW1ELCtDQVF1QjtBQUFBO0FBQUE7QUFBQSxJQUFBSztBQUFBQSxNQW5EMUU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVEL0xGIiwic291cmNlc0NvbnRlbnQiOlsiKCogZ2VuZXJhdGVkIGNvZGUgKikiLCJvcGVuISBCYXNlXG5tb2R1bGUgR2MgPSBTdGRsaWIuR2NcblxuZXh0ZXJuYWwgX19NT0RVTEVfXyA6IHN0cmluZyA9IFwiJWxvY19NT0RVTEVcIlxuXG5sZXQgYW1fcmVjb3JkaW5nX2Vudmlyb25tZW50X3ZhcmlhYmxlID0gXCJQUFhfTU9EVUxFX1RJTUVSXCJcblxubGV0IGdldF9hbV9yZWNvcmRpbmdfZW52aXJvbm1lbnRfdmFyaWFibGUgKCkgPVxuICAoKiBhdm9pZCBTdGRsaWIuU3lzLmdldGVudl9vcHQgdG8gcHJlc2VydmUgNC4wNC54IGNvbXBhdGliaWxpdHkgKilcbiAgbWF0Y2ggU3RkbGliLlN5cy5nZXRlbnYgYW1fcmVjb3JkaW5nX2Vudmlyb25tZW50X3ZhcmlhYmxlIHdpdGhcbiAgfCB2YWx1ZSAtPiBTb21lIHZhbHVlXG4gIHwgZXhjZXB0aW9uIF8gLT4gTm9uZVxuOztcblxubGV0IGFtX3JlY29yZGluZ192YWx1ZSA9IGdldF9hbV9yZWNvcmRpbmdfZW52aXJvbm1lbnRfdmFyaWFibGUgKClcbmxldCBhbV9yZWNvcmRpbmcgPSBPcHRpb24uaXNfc29tZSBhbV9yZWNvcmRpbmdfdmFsdWVcblxubW9kdWxlIER1cmF0aW9uID0gc3RydWN0XG4gIHR5cGUgdCA9IEludDYzLnRcblxuICBsZXQgdG9fbmFub3NlY29uZHMgdCA9IHRcbiAgbGV0IG9mX25hbm9zZWNvbmRzIHQgPSB0XG5cbiAgbW9kdWxlIHR5cGUgRm9ybWF0ID0gc2lnXG4gICAgdmFsIG9mX3N0cmluZyA6IHN0cmluZyAtPiB0XG4gICAgdmFsIHRvX3N0cmluZ193aXRoX3NhbWVfdW5pdCA6IHQgbGlzdCAtPiBzdHJpbmcgbGlzdFxuICBlbmRcblxuICBtb2R1bGUgRGVmYXVsdF9mb3JtYXQgPSBzdHJ1Y3RcbiAgICBsZXQgb2Zfc3RyaW5nIHN0cmluZyA9IFN0cmluZy5jaG9wX3N1ZmZpeF9leG4gc3RyaW5nIH5zdWZmaXg6XCJuc1wiIHw+IEludDYzLm9mX3N0cmluZ1xuICAgIGxldCB0b19zdHJpbmcgbmFub3MgPSBJbnQ2My50b19zdHJpbmcgbmFub3MgXiBcIm5zXCJcbiAgICBsZXQgdG9fc3RyaW5nX3dpdGhfc2FtZV91bml0IGxpc3QgPSBMaXN0Lm1hcCBsaXN0IH5mOnRvX3N0cmluZ1xuICBlbmRcblxuICBsZXQgZm9ybWF0ID0gcmVmIChtb2R1bGUgRGVmYXVsdF9mb3JtYXQgOiBGb3JtYXQpXG5cbiAgbGV0IG9mX3N0cmluZyBzdHJpbmcgPVxuICAgIGxldCAobW9kdWxlIEZvcm1hdCkgPSAhZm9ybWF0IGluXG4gICAgRm9ybWF0Lm9mX3N0cmluZyBzdHJpbmdcbiAgOztcblxuICBsZXQgdG9fc3RyaW5nX3dpdGhfc2FtZV91bml0IHN0cmluZyA9XG4gICAgbGV0IChtb2R1bGUgRm9ybWF0KSA9ICFmb3JtYXQgaW5cbiAgICBGb3JtYXQudG9fc3RyaW5nX3dpdGhfc2FtZV91bml0IHN0cmluZ1xuICA7O1xuZW5kXG5cbm1vZHVsZSBHY19ldmVudHMgPSBzdHJ1Y3RcbiAgdHlwZSB0ID1cbiAgICB7IG1pbm9yX2NvbGxlY3Rpb25zIDogaW50XG4gICAgOyBtYWpvcl9jb2xsZWN0aW9ucyA6IGludFxuICAgIDsgY29tcGFjdGlvbnMgOiBpbnRcbiAgICB9XG5lbmRcblxubW9kdWxlIFRpbWluZ19ldmVudCA9IHN0cnVjdFxuICB0eXBlIHQgPVxuICAgIHsgZGVzY3JpcHRpb24gOiBzdHJpbmdcbiAgICA7IHJ1bnRpbWUgOiBEdXJhdGlvbi50XG4gICAgOyBnY19ldmVudHMgOiBHY19ldmVudHMudFxuICAgIDsgbmVzdGVkX3RpbWluZ19ldmVudHMgOiB0IGxpc3RcbiAgICB9XG5lbmRcblxubW9kdWxlIFRpbWVyID0gc3RydWN0XG4gIHR5cGUgdCA9XG4gICAgeyBtdXRhYmxlIGN1cnJlbnRseV9ydW5uaW5nX2Rlc2NyaXB0aW9uIDogc3RyaW5nXG4gICAgOyBtdXRhYmxlIGN1cnJlbnRseV9ydW5uaW5nX3N0YXJ0X3RpbWUgOiBEdXJhdGlvbi50XG4gICAgOyBtdXRhYmxlIGN1cnJlbnRseV9ydW5uaW5nX2djX3N0YXRzIDogR2Muc3RhdFxuICAgIDsgbXV0YWJsZSBuZXN0ZWRfdGltZXIgOiB0IG9wdGlvblxuICAgIDsgbXV0YWJsZSB0aW1pbmdfZXZlbnRzX2luX3JldmVyc2VfY2hyb25vbG9naWNhbF9vcmRlciA6IFRpbWluZ19ldmVudC50IGxpc3RcbiAgICB9XG5cbiAgbGV0IGNyZWF0ZSA/bmVzdGVkX3RpbWVyICgpID1cbiAgICB7IGN1cnJlbnRseV9ydW5uaW5nX2Rlc2NyaXB0aW9uID0gXCJcIlxuICAgIDsgY3VycmVudGx5X3J1bm5pbmdfc3RhcnRfdGltZSA9IEludDYzLnplcm9cbiAgICA7IGN1cnJlbnRseV9ydW5uaW5nX2djX3N0YXRzID0gR2MucXVpY2tfc3RhdCAoKVxuICAgIDsgbmVzdGVkX3RpbWVyXG4gICAgOyB0aW1pbmdfZXZlbnRzX2luX3JldmVyc2VfY2hyb25vbG9naWNhbF9vcmRlciA9IFtdXG4gICAgfVxuICA7O1xuXG4gIGxldCByZXNldCB0ID1cbiAgICB0LmN1cnJlbnRseV9ydW5uaW5nX2Rlc2NyaXB0aW9uIDwtIFwiXCI7XG4gICAgdC5jdXJyZW50bHlfcnVubmluZ19zdGFydF90aW1lIDwtIEludDYzLnplcm87XG4gICAgbWF0Y2ggdC5uZXN0ZWRfdGltZXIgd2l0aFxuICAgIHwgTm9uZSAtPiAoKVxuICAgIHwgU29tZSBuZXN0ZWQgLT4gbmVzdGVkLnRpbWluZ19ldmVudHNfaW5fcmV2ZXJzZV9jaHJvbm9sb2dpY2FsX29yZGVyIDwtIFtdXG4gIDs7XG5cbiAgbGV0IHJlY29yZF9zdGFydCB0IGRlc2NyaXB0aW9uID1cbiAgICBpZiBhbV9yZWNvcmRpbmdcbiAgICB0aGVuIChcbiAgICAgIGFzc2VydCAoU3RyaW5nLmlzX2VtcHR5IHQuY3VycmVudGx5X3J1bm5pbmdfZGVzY3JpcHRpb24pO1xuICAgICAgdC5jdXJyZW50bHlfcnVubmluZ19kZXNjcmlwdGlvbiA8LSBkZXNjcmlwdGlvbjtcbiAgICAgIHQuY3VycmVudGx5X3J1bm5pbmdfZ2Nfc3RhdHMgPC0gR2MucXVpY2tfc3RhdCAoKTtcbiAgICAgICgqIGNhbGwgW1RpbWVfbm93XSBhcyBsYXRlIGFzIHBvc3NpYmxlIGJlZm9yZSBydW5uaW5nIHRoZSBtb2R1bGUgYm9keSAqKVxuICAgICAgdC5jdXJyZW50bHlfcnVubmluZ19zdGFydF90aW1lIDwtIFRpbWVfbm93Lm5hbm9zZWNvbmRzX3NpbmNlX3VuaXhfZXBvY2ggKCkpXG4gIDs7XG5cbiAgbGV0IHJlY29yZF91bnRpbCB0IGRlc2NyaXB0aW9uID1cbiAgICBpZiBhbV9yZWNvcmRpbmdcbiAgICB0aGVuIChcbiAgICAgICgqIGNvbXB1dGUgW1RpbWVfbm93XSBhcyBzb29uIGFzIHBvc3NpYmxlIGFmdGVyIHJ1bm5pbmcgdGhlIG1vZHVsZSBib2R5ICopXG4gICAgICBsZXQgdW50aWwgPSBUaW1lX25vdy5uYW5vc2Vjb25kc19zaW5jZV91bml4X2Vwb2NoICgpIGluXG4gICAgICBsZXQgc3RhcnQgPSB0LmN1cnJlbnRseV9ydW5uaW5nX3N0YXJ0X3RpbWUgaW5cbiAgICAgIGxldCBnY19zdGF0c19hZnRlciA9IEdjLnF1aWNrX3N0YXQgKCkgaW5cbiAgICAgIGxldCBnY19zdGF0c19iZWZvcmUgPSB0LmN1cnJlbnRseV9ydW5uaW5nX2djX3N0YXRzIGluXG4gICAgICBsZXQgcnVudGltZSA9IEludDYzLiggLSApIHVudGlsIHN0YXJ0IGluXG4gICAgICBhc3NlcnQgKFN0cmluZy5lcXVhbCB0LmN1cnJlbnRseV9ydW5uaW5nX2Rlc2NyaXB0aW9uIGRlc2NyaXB0aW9uKTtcbiAgICAgIGxldCBnY19ldmVudHMgOiBHY19ldmVudHMudCA9XG4gICAgICAgIHsgbWlub3JfY29sbGVjdGlvbnMgPVxuICAgICAgICAgICAgZ2Nfc3RhdHNfYWZ0ZXIubWlub3JfY29sbGVjdGlvbnMgLSBnY19zdGF0c19iZWZvcmUubWlub3JfY29sbGVjdGlvbnNcbiAgICAgICAgOyBtYWpvcl9jb2xsZWN0aW9ucyA9XG4gICAgICAgICAgICBnY19zdGF0c19hZnRlci5tYWpvcl9jb2xsZWN0aW9ucyAtIGdjX3N0YXRzX2JlZm9yZS5tYWpvcl9jb2xsZWN0aW9uc1xuICAgICAgICA7IGNvbXBhY3Rpb25zID0gZ2Nfc3RhdHNfYWZ0ZXIuY29tcGFjdGlvbnMgLSBnY19zdGF0c19iZWZvcmUuY29tcGFjdGlvbnNcbiAgICAgICAgfVxuICAgICAgaW5cbiAgICAgIGxldCBuZXN0ZWRfdGltaW5nX2V2ZW50cyA9XG4gICAgICAgIG1hdGNoIHQubmVzdGVkX3RpbWVyIHdpdGhcbiAgICAgICAgfCBOb25lIC0+IFtdXG4gICAgICAgIHwgU29tZSBuZXN0ZWQgLT4gTGlzdC5yZXYgbmVzdGVkLnRpbWluZ19ldmVudHNfaW5fcmV2ZXJzZV9jaHJvbm9sb2dpY2FsX29yZGVyXG4gICAgICBpblxuICAgICAgbGV0IHRpbWluZ19ldmVudCA6IFRpbWluZ19ldmVudC50ID1cbiAgICAgICAgeyBkZXNjcmlwdGlvbjsgcnVudGltZTsgZ2NfZXZlbnRzOyBuZXN0ZWRfdGltaW5nX2V2ZW50cyB9XG4gICAgICBpblxuICAgICAgdC50aW1pbmdfZXZlbnRzX2luX3JldmVyc2VfY2hyb25vbG9naWNhbF9vcmRlclxuICAgICAgPC0gdGltaW5nX2V2ZW50IDo6IHQudGltaW5nX2V2ZW50c19pbl9yZXZlcnNlX2Nocm9ub2xvZ2ljYWxfb3JkZXI7XG4gICAgICByZXNldCB0KVxuICA7O1xuZW5kXG5cbmxldCBkZWZpbml0aW9uX3RpbWVyID0gVGltZXIuY3JlYXRlICgpXG5sZXQgbW9kdWxlX3RpbWVyID0gVGltZXIuY3JlYXRlIH5uZXN0ZWRfdGltZXI6ZGVmaW5pdGlvbl90aW1lciAoKVxubGV0IHJlY29yZF9zdGFydCBtb2R1bGVfbmFtZSA9IFRpbWVyLnJlY29yZF9zdGFydCBtb2R1bGVfdGltZXIgbW9kdWxlX25hbWVcbmxldCByZWNvcmRfdW50aWwgbW9kdWxlX25hbWUgPSBUaW1lci5yZWNvcmRfdW50aWwgbW9kdWxlX3RpbWVyIG1vZHVsZV9uYW1lXG5sZXQgcmVjb3JkX2RlZmluaXRpb25fc3RhcnQgbG9jID0gVGltZXIucmVjb3JkX3N0YXJ0IGRlZmluaXRpb25fdGltZXIgbG9jXG5sZXQgcmVjb3JkX2RlZmluaXRpb25fdW50aWwgbG9jID0gVGltZXIucmVjb3JkX3VudGlsIGRlZmluaXRpb25fdGltZXIgbG9jXG5cbmxldCBnY19ldmVudHNfc3VmZml4X3N0cmluZ1xuICAgICAgKHsgbWlub3JfY29sbGVjdGlvbnM7IG1ham9yX2NvbGxlY3Rpb25zOyBjb21wYWN0aW9ucyB9IDogR2NfZXZlbnRzLnQpXG4gID1cbiAgbGV0IHRvX2xpc3QgZGVzY3JpcHRpb24gY291bnQgPVxuICAgIGlmIGNvdW50ID0gMCB0aGVuIFtdIGVsc2UgWyBJbnQudG9fc3RyaW5nIGNvdW50IF4gXCIgXCIgXiBkZXNjcmlwdGlvbiBdXG4gIGluXG4gIGxldCBzdHJpbmdzID1cbiAgICB0b19saXN0IFwibWlub3IgY29sbGVjdGlvbnNcIiBtaW5vcl9jb2xsZWN0aW9uc1xuICAgIEAgdG9fbGlzdCBcIm1ham9yIGNvbGxlY3Rpb25zXCIgbWFqb3JfY29sbGVjdGlvbnNcbiAgICBAIHRvX2xpc3QgXCJjb21wYWN0aW9uc1wiIGNvbXBhY3Rpb25zXG4gIGluXG4gIGlmIExpc3QuaXNfZW1wdHkgc3RyaW5ncyB0aGVuIFwiXCIgZWxzZSBcIjsgR0M6IFwiIF4gU3RyaW5nLmNvbmNhdCBzdHJpbmdzIH5zZXA6XCIsIFwiXG47O1xuXG5sZXQgd2l0aF9sZWZ0X2NvbHVtbl9yaWdodF9qdXN0aWZpZWQgbGlzdCA9XG4gIGxldCBsZWZ0X2NvbHVtbl93aWR0aCA9XG4gICAgTGlzdC5mb2xkIGxpc3QgfmluaXQ6MCB+ZjooZnVuIHdpZHRoIChsZWZ0LCBfKSAtPiBJbnQubWF4IHdpZHRoIChTdHJpbmcubGVuZ3RoIGxlZnQpKVxuICBpblxuICBMaXN0Lm1hcCBsaXN0IH5mOihmdW4gKGxlZnQsIHJpZ2h0KSAtPlxuICAgIFByaW50Zi5zcHJpbnRmIFwiJSpzICVzXCIgbGVmdF9jb2x1bW5fd2lkdGggbGVmdCByaWdodClcbjs7XG5cbmxldCByZWMgdGltaW5nX2V2ZW50c190b19zdHJpbmdzIGxpc3QgfmluZGVudCA9XG4gIGxldCBkdXJhdGlvbl9zdHJpbmdzID1cbiAgICBMaXN0Lm1hcCBsaXN0IH5mOihmdW4gKHRpbWluZ19ldmVudCA6IFRpbWluZ19ldmVudC50KSAtPiB0aW1pbmdfZXZlbnQucnVudGltZSlcbiAgICB8PiBEdXJhdGlvbi50b19zdHJpbmdfd2l0aF9zYW1lX3VuaXRcbiAgaW5cbiAgbGV0IHByZWZpeCA9IFN0cmluZy5tYWtlIGluZGVudCAnICcgaW5cbiAgTGlzdC5tYXAyX2V4blxuICAgIGR1cmF0aW9uX3N0cmluZ3NcbiAgICBsaXN0XG4gICAgfmY6XG4gICAgICAoZnVuXG4gICAgICAgIGR1cmF0aW9uX3N0cmluZyB7IHJ1bnRpbWUgPSBfOyBkZXNjcmlwdGlvbjsgZ2NfZXZlbnRzOyBuZXN0ZWRfdGltaW5nX2V2ZW50cyB9IC0+XG4gICAgICAgICggZHVyYXRpb25fc3RyaW5nXG4gICAgICAgICwgZGVzY3JpcHRpb25cbiAgICAgICAgICBeIGdjX2V2ZW50c19zdWZmaXhfc3RyaW5nIGdjX2V2ZW50c1xuICAgICAgICAgIF4gU3RyaW5nLmNvbmNhdFxuICAgICAgICAgICAgICAoTGlzdC5tYXBcbiAgICAgICAgICAgICAgICAgKHRpbWluZ19ldmVudHNfdG9fc3RyaW5ncyBuZXN0ZWRfdGltaW5nX2V2ZW50cyB+aW5kZW50OihpbmRlbnQgKyA0KSlcbiAgICAgICAgICAgICAgICAgfmY6KGZ1biBsaW5lIC0+IFwiXFxuXCIgXiBsaW5lKSkgKSlcbiAgfD4gd2l0aF9sZWZ0X2NvbHVtbl9yaWdodF9qdXN0aWZpZWRcbiAgfD4gTGlzdC5tYXAgfmY6KGZ1biBsaW5lIC0+IHByZWZpeCBeIGxpbmUpXG47O1xuXG5sZXQgZmFrZV90aW1pbmdfZXZlbnRzID1cbiAgbGV0IGdjX2V2ZW50cyBpIDogR2NfZXZlbnRzLnQgPVxuICAgIHsgbWlub3JfY29sbGVjdGlvbnMgPSAoaWYgaSAlIDIgPSAxIHRoZW4gMSBlbHNlIDApXG4gICAgOyBtYWpvcl9jb2xsZWN0aW9ucyA9IChpZiBpICUgNCA9IDMgdGhlbiAxIGVsc2UgMClcbiAgICA7IGNvbXBhY3Rpb25zID0gKGlmIGkgJSA4ID0gNyB0aGVuIDEgZWxzZSAwKVxuICAgIH1cbiAgaW5cbiAgbGF6eVxuICAgIChMaXN0LmluaXQgMTIgfmY6KGZ1biBpIDogVGltaW5nX2V2ZW50LnQgLT5cbiAgICAgICB7IGRlc2NyaXB0aW9uID0gUHJpbnRmLnNwcmludGYgXCJGYWtlX19EZXBlbmRlbmN5XyVkXCIgKGkgKyAxKVxuICAgICAgIDsgcnVudGltZSA9IEludDYzLm9mX2ludCAoOTAwICogKGkgKyAxKSlcbiAgICAgICA7IGdjX2V2ZW50cyA9IGdjX2V2ZW50cyBpXG4gICAgICAgOyBuZXN0ZWRfdGltaW5nX2V2ZW50cyA9XG4gICAgICAgICAgIChpZiAoaSArIDEpICUgNCA9IDBcbiAgICAgICAgICAgIHRoZW5cbiAgICAgICAgICAgICAgTGlzdC5pbml0IChpICsgMSkgfmY6KGZ1biBqIDogVGltaW5nX2V2ZW50LnQgLT5cbiAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uID0gUHJpbnRmLnNwcmludGYgXCJMaW5lICVkXCIgKGogKyAxKVxuICAgICAgICAgICAgICAgIDsgcnVudGltZSA9IEludDYzLm9mX2ludCAoOTAwICogKGogKyAxKSlcbiAgICAgICAgICAgICAgICA7IGdjX2V2ZW50cyA9IGdjX2V2ZW50cyBqXG4gICAgICAgICAgICAgICAgOyBuZXN0ZWRfdGltaW5nX2V2ZW50cyA9IFtdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGVsc2UgW10pXG4gICAgICAgfSkpXG47O1xuXG5sZXQgcHJpbnRfcmVjb3JkZWRfdGltaW5nX2V2ZW50cyB0aW1pbmdfZXZlbnRzID1cbiAgbGV0IG5vdGlmeV9vZl9vdmVycmlkaW5nICgpID1cbiAgICBTdGRpby5wcmludF9lbmRsaW5lIFwicHB4X21vZHVsZV90aW1lcjogb3ZlcnJpZGluZyB0aW1lIG1lYXN1cmVtZW50cyBmb3IgdGVzdGluZ1wiXG4gIGluXG4gIGxldCB0aW1pbmdfZXZlbnRzID1cbiAgICBtYXRjaCBPcHRpb24udmFsdWVfZXhuIGFtX3JlY29yZGluZ192YWx1ZSB3aXRoXG4gICAgfCBcIkZBS0VfTU9EVUxFU1wiIC0+XG4gICAgICBub3RpZnlfb2Zfb3ZlcnJpZGluZyAoKTtcbiAgICAgIGZvcmNlIGZha2VfdGltaW5nX2V2ZW50c1xuICAgIHwgc3RyaW5nIC0+XG4gICAgICAobWF0Y2ggRHVyYXRpb24ub2Zfc3RyaW5nIHN0cmluZyB3aXRoXG4gICAgICAgfCBvdmVycmlkZSAtPlxuICAgICAgICAgbm90aWZ5X29mX292ZXJyaWRpbmcgKCk7XG4gICAgICAgICBMaXN0Lm1hcGkgdGltaW5nX2V2ZW50cyB+ZjooZnVuIGluZGV4ICh0aW1pbmdfZXZlbnQgOiBUaW1pbmdfZXZlbnQudCkgLT5cbiAgICAgICAgICAgbGV0IHJ1bnRpbWUgPSBJbnQ2My4oICogKSBvdmVycmlkZSAoSW50NjMub2ZfaW50IChpbmRleCArIDEpKSBpblxuICAgICAgICAgICBsZXQgbmVzdGVkX3RpbWluZ19ldmVudHMgPVxuICAgICAgICAgICAgIExpc3QubWFwaVxuICAgICAgICAgICAgICAgdGltaW5nX2V2ZW50Lm5lc3RlZF90aW1pbmdfZXZlbnRzXG4gICAgICAgICAgICAgICB+ZjooZnVuIGluZGV4IG5lc3RlZF90aW1pbmdfZXZlbnQgLT5cbiAgICAgICAgICAgICAgICAgbGV0IHJ1bnRpbWUgPSBJbnQ2My4oICogKSBvdmVycmlkZSAoSW50NjMub2ZfaW50IChpbmRleCArIDEpKSBpblxuICAgICAgICAgICAgICAgICB7IG5lc3RlZF90aW1pbmdfZXZlbnQgd2l0aCBydW50aW1lIH0pXG4gICAgICAgICAgIGluXG4gICAgICAgICAgIHsgdGltaW5nX2V2ZW50IHdpdGggcnVudGltZTsgbmVzdGVkX3RpbWluZ19ldmVudHMgfSlcbiAgICAgICB8IGV4Y2VwdGlvbiBfIC0+IHRpbWluZ19ldmVudHMpXG4gIGluXG4gIHRpbWluZ19ldmVudHMgfD4gdGltaW5nX2V2ZW50c190b19zdHJpbmdzIH5pbmRlbnQ6MCB8PiBMaXN0Lml0ZXIgfmY6U3RkaW8ucHJpbnRfZW5kbGluZVxuOztcblxubGV0ICgpID1cbiAgaWYgYW1fcmVjb3JkaW5nXG4gIHRoZW5cbiAgICBTdGRsaWIuYXRfZXhpdCAoZnVuICgpIC0+XG4gICAgICBwcmludF9yZWNvcmRlZF90aW1pbmdfZXZlbnRzXG4gICAgICAgIChMaXN0LnJldiBtb2R1bGVfdGltZXIudGltaW5nX2V2ZW50c19pbl9yZXZlcnNlX2Nocm9ub2xvZ2ljYWxfb3JkZXIpKVxuOztcbiJdLCJpZ25vcmVMaXN0IjpbMF19fV19
