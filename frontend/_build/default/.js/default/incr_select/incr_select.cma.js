// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.9.1

//# unitInfo: Provides: Incr_select__
(function
  (globalThis){
   "use strict";
   var runtime = globalThis.jsoo_runtime, Incr_select = [0];
   runtime.caml_register_global(0, Incr_select, "Incr_select__");
   return;
  }
  (globalThis));

//# unitInfo: Provides: Incr_select__Incr_select_intf
//# unitInfo: Requires: Expect_test_collector, Ppx_bench_lib__Benchmark_accumulator, Ppx_inline_test_lib, Ppx_module_timer_runtime
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Incr_select_Incr_select_in = "Incr_select__Incr_select_intf",
    cst_incr_select = "incr_select";
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Expect_test_collector = global_data.Expect_test_collector,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib;
   caml_call1(Ppx_module_timer_runtime[4], cst_Incr_select_Incr_select_in);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_incr_select);
   caml_call1(Expect_test_collector[6][1], "src/incr_select_intf.ml");
   caml_call2(Ppx_inline_test_lib[5], cst_incr_select, "incr_select_intf.ml");
   caml_call1(Ppx_inline_test_lib[6], cst_incr_select);
   caml_call1(Expect_test_collector[6][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Incr_select_Incr_select_in);
   var Incr_select_Incr_select_intf = [0];
   runtime.caml_register_global
    (11, Incr_select_Incr_select_intf, cst_Incr_select_Incr_select_in);
   return;
  }
  (globalThis));

//# unitInfo: Provides: Incr_select
//# unitInfo: Requires: Core, Core__Fn, Core__Hash_set, Core__Hashtbl, Core__List, Core__Option, Expect_test_collector, Ppx_bench_lib__Benchmark_accumulator, Ppx_inline_test_lib, Ppx_module_timer_runtime
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Incr_select = "Incr_select",
    cst_incr_select = "incr_select";
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) === 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) === 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) === 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) === 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Core_Hash_set = global_data.Core__Hash_set,
    Core_List = global_data.Core__List,
    Core_Hashtbl = global_data.Core__Hashtbl,
    Core_Option = global_data.Core__Option,
    Core = global_data.Core,
    Core_Fn = global_data.Core__Fn,
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Expect_test_collector = global_data.Expect_test_collector,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib;
   caml_call1(Ppx_module_timer_runtime[4], cst_Incr_select);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_incr_select);
   caml_call1(Expect_test_collector[6][1], "src/incr_select.ml");
   caml_call2(Ppx_inline_test_lib[5], cst_incr_select, "incr_select.ml");
   caml_call1(Ppx_inline_test_lib[6], cst_incr_select);
   caml_call1(Expect_test_collector[6][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Incr_select);
   var
    Incr_select =
      [0,
       function(Incr){
        var E = Incr[78], hashtbl_size = 10;
        function setup_generator(hashable, compute_output, make_input_node){
         var
          necessary_dependencies =
            caml_call4(Core_Hashtbl[86][1], 0, [0, hashtbl_size], hashable, 0);
         function make_key_stale(key){
          var
           _k_ = E[2][4],
           _l_ = caml_call2(Core_Hashtbl[55], necessary_dependencies, key),
           _m_ = caml_call2(Core_Option[35], _l_, 0);
          return caml_call2(Core_List[19], _m_, _k_);
         }
         var input_node = caml_call1(make_input_node, make_key_stale);
         caml_call2(Incr[58], input_node, Incr[57][6]);
         return caml_call1
                 (Core[260],
                  function(key){
                   var
                    input_dep = caml_call2(E[1][2], 0, input_node),
                    output_node = [];
                   runtime.caml_update_dummy
                    (output_node,
                     [246,
                      function(_f_){
                       return caml_call2
                               (E[2][2],
                                [0,
                                 function(is_now_observable){
                                  if(! is_now_observable)
                                   return caml_call3
                                           (Core_Hashtbl[39],
                                            necessary_dependencies,
                                            key,
                                            function(param){
                                             if(! param) return 0;
                                             var
                                              l = param[1],
                                              _h_ = caml_call1(Core[242], output_node),
                                              _i_ =
                                                caml_call1
                                                 (Core_Fn[2], function(_j_){return _h_ === _j_ ? 1 : 0;}),
                                              l$0 = caml_call2(Core_List[11], l, _i_);
                                             return l$0 ? [0, l$0] : 0;
                                            });
                                  var _g_ = caml_call1(Core[242], output_node);
                                  return caml_call3
                                          (Core_Hashtbl[80], necessary_dependencies, key, _g_);
                                 }],
                                function(param){return caml_call1(compute_output, key);});
                      }]);
                   var output_node$0 = caml_call1(Core[242], output_node);
                   caml_call2(E[2][6], output_node$0, input_dep);
                   return caml_call1(E[2][3], output_node$0);
                  });
        }
        function update_one(input, selected, make_stale){
         return caml_call2
                 (Incr[9],
                  input,
                  function(inp){
                   caml_call2(Core_Option[42], inp, make_stale);
                   caml_call2(Core_Option[42], selected[1], make_stale);
                   selected[1] = inp;
                   return 0;
                  });
        }
        function select_one(H, input){
         var selected = [0, 0];
         function compute_output(key){
          var match = selected[1];
          if(! match) return 0;
          var key$0 = match[1], _e_ = caml_call2(H[1], key, key$0);
          return caml_call2(Core[89], _e_, 0);
         }
         function make_input_node(make_key_stale){
          return update_one(input, selected, make_key_stale);
         }
         return setup_generator(H[4], compute_output, make_input_node);
        }
        function select_one$0(h, input){
         return select_one(h, caml_call2(Incr[9], input, Core_Option[54]));
        }
        function select_one_value(H, default$0, input){
         var selected = [0, 0];
         function compute_output(key){
          var _c_ = selected[1];
          if(! _c_) return default$0;
          var
           match = _c_[1],
           data = match[2],
           key$0 = match[1],
           _d_ = caml_call2(H[1], key, key$0);
          return caml_call2(Core[89], _d_, 0) ? data : default$0;
         }
         function make_input_node(make_key_stale){
          return update_one
                  (input,
                   selected,
                   function(param){
                    var key = param[1];
                    return caml_call1(make_key_stale, key);
                   });
         }
         return setup_generator(H[4], compute_output, make_input_node);
        }
        function select_one_value$0(h, default$0, input){
         return select_one_value
                 (h, default$0, caml_call2(Incr[9], input, Core_Option[54]));
        }
        function select_many_values(H, default$0, input){
         var
          hashable = H[4],
          selected =
            caml_call4(Core_Hashtbl[86][1], 0, [0, hashtbl_size], hashable, 0);
         function compute_output(key){
          var _b_ = caml_call2(Core_Hashtbl[55], selected, key);
          return caml_call2(Core_Option[35], _b_, default$0);
         }
         function make_input_node(make_key_stale){
          return caml_call2
                  (Incr[9],
                   input,
                   function(inp){
                    caml_call2(Core_Hashtbl[19], selected, make_key_stale);
                    caml_call1(Core_Hashtbl[16], selected);
                    return caml_call2
                            (Core_List[19],
                             inp,
                             function(param){
                              var data = param[2], key = param[1];
                              caml_call1(make_key_stale, key);
                              return caml_call3(Core_Hashtbl[36], selected, key, data);
                             });
                   });
         }
         return setup_generator(hashable, compute_output, make_input_node);
        }
        function select_many(H, input){
         var
          hashable = H[4],
          selected =
            caml_call4
             (Core_Hash_set[38][1], 0, [0, hashtbl_size], hashable, 0);
         function compute_output(key){
          return caml_call2(Core_Hash_set[20], selected, key);
         }
         function make_input_node(make_key_stale){
          return caml_call2
                  (Incr[9],
                   input,
                   function(inp){
                    var old_set = caml_call1(Core_Hash_set[21], selected);
                    caml_call1(Core_Hash_set[28], selected);
                    caml_call2
                     (Core_List[19],
                      inp,
                      function(key){
                       if(1 - caml_call2(Core_Hash_set[20], old_set, key))
                        caml_call1(make_key_stale, key);
                       return caml_call2(Core_Hash_set[22], selected, key);
                      });
                    return caml_call2
                            (Core_Hash_set[6],
                             old_set,
                             function(key){
                              var _a_ = 1 - caml_call2(Core_Hash_set[20], selected, key);
                              return _a_ ? caml_call1(make_key_stale, key) : _a_;
                             });
                   });
         }
         return setup_generator(hashable, compute_output, make_input_node);
        }
        return [0,
                select_one$0,
                select_one,
                select_one_value$0,
                select_one_value,
                select_many,
                select_many_values];
       }];
   runtime.caml_register_global(17, Incr_select, cst_Incr_select);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5jcl9zZWxlY3QuY21hLmpzIiwic2VjdGlvbnMiOlt7Im9mZnNldCI6eyJsaW5lIjo3LCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6ImluY3Jfc2VsZWN0LmNtYS5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJJbmNyX3NlbGVjdCJdLCJzb3VyY2VzIjpbIi9idWlsdGluL2JsYWNrYm94Lm1sIl0sIm1hcHBpbmdzIjoiT0FBQUEsVUFBQSx5QkFBQUMsY0FBQSIsInNvdXJjZXNDb250ZW50IjpbIigqIGdlbmVyYXRlZCBjb2RlICopIl0sImlnbm9yZUxpc3QiOlswXX19LHsib2Zmc2V0Ijp7ImxpbmUiOjE5LCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6ImluY3Jfc2VsZWN0LmNtYS5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJjc3RfSW5jcl9zZWxlY3RfSW5jcl9zZWxlY3RfaW4iLCJjc3RfaW5jcl9zZWxlY3QiLCJjYW1sX2NhbGwxIiwiZiIsImEwIiwiY2FtbF9jYWxsMiIsImExIiwiZ2xvYmFsX2RhdGEiLCJQcHhfbW9kdWxlX3RpbWVyX3J1bnRpbWUiLCJQcHhfYmVuY2hfbGliX0JlbmNobWFya19hY2N1bXUiLCJFeHBlY3RfdGVzdF9jb2xsZWN0b3IiLCJQcHhfaW5saW5lX3Rlc3RfbGliIiwiSW5jcl9zZWxlY3RfSW5jcl9zZWxlY3RfaW50ZiJdLCJzb3VyY2VzIjpbIi9idWlsdGluL2JsYWNrYm94Lm1sIiwiL1VzZXJzL3lhbm5pY2svLm9wYW0vYm9uc2FpLWZyb250ZW5kL2xpYi9pbmNyX3NlbGVjdC9pbmNyX3NlbGVjdF9pbnRmLm1sIl0sIm1hcHBpbmdzIjoiSUFBQUEsVUFBQTtBQUFBLElBQUFDLGlDQUFBO0FBQUEsSUFBQUMsa0JBQUE7QUFBQSxZQUFBQyxXQUFBQyxHQUFBQztBQUFBQSxJQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsWUFBQUMsV0FBQUYsR0FBQUMsSUFBQUU7QUFBQUEsSUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUMsY0FBQTtBQUFBLElBQUFDLDJCQUFBO0FBQUEsSUFBQUM7QUFBQUEsTUFBQTtBQUFBLElBQUFDLHdCQUFBO0FBQUEsSUFBQUMsc0JBQUE7QUFBQSxHQ0FBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FtRkc7QUFBQTtBQUFBO0FBQUE7QUFBQSxPQUFBQywrQkFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVEbkZIIiwic291cmNlc0NvbnRlbnQiOlsiKCogZ2VuZXJhdGVkIGNvZGUgKikiLCJvcGVuIENvcmVcblxubW9kdWxlIHR5cGUgUyA9IHNpZ1xuICBtb2R1bGUgSW5jciA6IHNpZ1xuICAgIHR5cGUgJ2EgdFxuICBlbmRcblxuICAoKiogW3NlbGVjdF9vbmVdIGxvZ2ljYWxseSBjb25zdHJ1Y3RzIGEgc2V0IG9mIG91dHB1dHMgc3VjaCB0aGF0IGV4YWN0bHkgb25lIGlzIHNlbGVjdGVkXG4gICAgICBhcyBbdHJ1ZV0gKHNwZWNpZmljYWxseSB0aGUgb25lIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0KSxcbiAgICAgIGFuZCB0aGUgcmVzdCBhcmUgZmFsc2UuICBUaGUgc3RhZ2VkIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIGNyZWF0aW5nIGluY3JlbWVudGFscyB0aGF0XG4gICAgICBjb250YWluIHRoZSBhcHByb3ByaWF0ZSBvdXRwdXQgdmFsdWUuICopXG4gIHZhbCBzZWxlY3Rfb25lXG4gICAgOiAgKG1vZHVsZSBIYXNoYWJsZS5Db21tb24gd2l0aCB0eXBlIHQgPSAnYSlcbiAgICAtPiAnYSBJbmNyLnRcbiAgICAtPiAoJ2EgLT4gYm9vbCBJbmNyLnQpIFN0YWdlZC50XG5cbiAgKCoqIFtzZWxlY3Rfb25lJ10gaXMgc2ltaWxhciB0byBbc2VsZWN0X29uZV0sIGV4Y2VwdCB5b3UgY2FuIGRlY2lkZSB0byBub3QgbWFrZSBhIGNob2ljZVxuICAgICAgKGJ5IGNob29zaW5nIFtOb25lXSkgKilcbiAgdmFsIHNlbGVjdF9vbmUnXG4gICAgOiAgKG1vZHVsZSBIYXNoYWJsZS5Db21tb24gd2l0aCB0eXBlIHQgPSAnYSlcbiAgICAtPiAnYSBvcHRpb24gSW5jci50XG4gICAgLT4gKCdhIC0+IGJvb2wgSW5jci50KSBTdGFnZWQudFxuXG4gICgqKiBbc2VsZWN0X29uZV92YWx1ZV0gaXMgc2ltaWxhciB0byBbc2VsZWN0X29uZV0sIGV4Y2VwdCB5b3UgYWxzbyBnZXQgdG8gc3BlY2lmeSB0aGVcbiAgICAgIHZhbHVlIGl0IHdpbGwgdGFrZSBvbiBpbnN0ZWFkIG9mIG9ubHkgW3RydWVdIGFuZCBbZmFsc2VdLiAgW3NlbGVjdF9vbmUgaCBpbnB1dF0gaXNcbiAgICAgIGVxdWl2YWxlbnQgdG86XG5cbiAgICAgIHtbIHNlbGVjdF9vbmVfdmFsdWUgaCB+ZGVmYXVsdDpmYWxzZSAobGV0JW1hcCB4ID0gaW5wdXQgaW4gKHgsIHRydWUpKSBdfVxuICAqKVxuICB2YWwgc2VsZWN0X29uZV92YWx1ZVxuICAgIDogIChtb2R1bGUgSGFzaGFibGUuQ29tbW9uIHdpdGggdHlwZSB0ID0gJ2EpXG4gICAgLT4gZGVmYXVsdDonYlxuICAgIC0+ICgnYSAqICdiKSBJbmNyLnRcbiAgICAtPiAoJ2EgLT4gJ2IgSW5jci50KSBTdGFnZWQudFxuXG4gICgqKiBbc2VsZWN0X29uZV92YWx1ZSddIGlzIHRoZSBzYW1lIGFzIFtzZWxlY3Rfb25lX3ZhbHVlXSBleGNlcHQgaWYgdGhlIGlucHV0IGlzIE5vbmUsXG4gICAgICB0aGVuIGFsbCBvdXRwdXRzIGFyZSBbZGVmYXVsdF0uICopXG4gIHZhbCBzZWxlY3Rfb25lX3ZhbHVlJ1xuICAgIDogIChtb2R1bGUgSGFzaGFibGUuQ29tbW9uIHdpdGggdHlwZSB0ID0gJ2EpXG4gICAgLT4gZGVmYXVsdDonYlxuICAgIC0+ICgnYSAqICdiKSBvcHRpb24gSW5jci50XG4gICAgLT4gKCdhIC0+ICdiIEluY3IudCkgU3RhZ2VkLnRcblxuICAoKiogW3NlbGVjdF9tYW55XSBhbGxvd3MgeW91IHRvIHNwZWNpZnkgYSBncm91cCBvZiBvdXRwdXRzIHRvIGJlIHNlbGVjdGVkIGFzIHRydWVcbiAgICAgIGluc3RlYWQgb2YganVzdCBvbmUuICBbc2VsZWN0X29uZSBoIGlucHV0XSBpcyBlcXVpdmFsZW50IHRvOlxuXG4gICAgICB7W3NlbGVjdF9tYW55IGggKGxldCVtYXAgeCA9IGlucHV0IGluIFt4XSldfVxuICAqKVxuICB2YWwgc2VsZWN0X21hbnlcbiAgICA6ICAobW9kdWxlIEhhc2hhYmxlLkNvbW1vbiB3aXRoIHR5cGUgdCA9ICdhKVxuICAgIC0+ICdhIGxpc3QgSW5jci50XG4gICAgLT4gKCdhIC0+IGJvb2wgSW5jci50KSBTdGFnZWQudFxuXG4gICgqKiBbc2VsZWN0X21hbnlfdmFsdWVzXSBhbGxvd3MgeW91IHNwZWNpZnkgYSBncm91cCBvZiBvdXRwdXRzIHRvIGJlIHNlbGVjdGVkIGFuZCB0aGVpclxuICAgICAgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG5cbiAgICAgIFRoaXMgaXMgdGhlIG1vc3QgZ2VuZXJhbCBvZiB0aGVzZSBmdW5jdGlvbnM7IGFsbCB0aGUgb3RoZXJzIGNhbiBiZSByZWR1Y2VkIHRvIGl0LlxuICAqKVxuICB2YWwgc2VsZWN0X21hbnlfdmFsdWVzXG4gICAgOiAgKG1vZHVsZSBIYXNoYWJsZS5Db21tb24gd2l0aCB0eXBlIHQgPSAnYSlcbiAgICAtPiBkZWZhdWx0OidiXG4gICAgLT4gKCdhICogJ2IpIGxpc3QgSW5jci50XG4gICAgLT4gKCdhIC0+ICdiIEluY3IudCkgU3RhZ2VkLnRcbmVuZFxuXG5tb2R1bGUgdHlwZSBJbmNyX3NlbGVjdCA9IHNpZ1xuICAoKiogVGhpcyBtb2R1bGUgcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gY3JlYXRlIGEgbGFyZ2Ugc2V0IG9mIGluY3JlbWVudGFsIG91dHB1dHMgYmFzZWRcbiAgICAgIG9uIGEgc2luZ2xlIGluY3JlbWVudGFsIGlucHV0LCB3aGVyZSBzb21lIHN1YnNldCBvZiB0aGUgb3V0cHV0cyBhcmUgc2VsZWN0ZWQgdG8gaGF2ZVxuICAgICAgc3BlY2lmaWMgdmFsdWVzLCBhbmQgdGhlIHJlbWFpbmRlciBhcmUgbGVmdCB3aXRoIGEgc3BlY2lmaWVkIGRlZmF1bHQgdmFsdWUuIFRoZVxuICAgICAgb3V0cHV0cyBhcmUgdXBkYXRlZCBpbiB0aW1lIHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mIG91dHB1dHMgdGhhdCBhcmUgY2hhbmdlZCxcbiAgICAgIGluZGVwZW5kZW50IG9mIHRoZSBudW1iZXIgb2Ygb3V0cHV0cyB0aGF0IGV4aXN0LiBFYWNoIGZ1bmN0aW9uIHJldHVybnMgYSBzdGFnZWRcbiAgICAgIGZ1bmN0aW9uIGZvciBhbGxvY2F0aW5nIG5ldyBvdXRwdXQgaW5jcmVtZW50YWxzLlxuXG4gICAgICBOb3RlIHRoYXQgaXQncyBwb3NzaWJsZSB0aGF0IG5vIGluY3JlbWVudGFsIG91dHB1dCBpcyBhY3R1YWxseSBpbnN0YW50aWF0ZWQgZm9yIHRoZVxuICAgICAgbm9kZSB0aGF0IGlzIHNlbGVjdGVkLCB3aGljaCBpcyBub3QgYSBwcm9ibGVtLiBBbHNvLCBvbmUgY2FuIGhhdmUgbW9yZSB0aGFuIG9uZVxuICAgICAgaW5jcmVtZW50YWwgdGhhdCByZWZsZWN0cyB0aGUgc2FtZSBvdXRwdXQuXG5cbiAgICAgIEFuIGV4YW1wbGUgb2Ygd2hlcmUgdGhpcyBpcyB1c2VmdWwgaXMgZm9yIG1hbmFnaW5nIGZvY3VzIGluIGEgVUksIHdoZXJlIHlvdSB3YW50IGFcbiAgICAgIHNpbmdsZSB2YWx1ZSB0byBkZXRlcm1pbmUgd2hlcmUgdGhlIGZvY3VzIGlzLCBhbmQgbWFueSBpbmRpdmlkdWFsIGluY3JlbWVudGFscyBmb3JcbiAgICAgIGRldGVybWluaW5nIHdoZXRoZXIgYSBnaXZlbiBzdWItY29tcG9uZW50IGlzIGluIGZvY3VzLlxuICAqKVxuXG4gIG1vZHVsZSBNYWtlIChJbmNyIDogSW5jcmVtZW50YWwuU19nZW4pIDogUyB3aXRoIG1vZHVsZSBJbmNyIDo9IEluY3JcbmVuZFxuIl0sImlnbm9yZUxpc3QiOlswXX19LHsib2Zmc2V0Ijp7ImxpbmUiOjYwLCJjb2x1bW4iOjB9LCJtYXAiOnsidmVyc2lvbiI6MywiZmlsZSI6ImluY3Jfc2VsZWN0LmNtYS5qcyIsIm5hbWVzIjpbInJ1bnRpbWUiLCJjc3RfSW5jcl9zZWxlY3QiLCJjc3RfaW5jcl9zZWxlY3QiLCJjYW1sX2NhbGwxIiwiZiIsImEwIiwiY2FtbF9jYWxsMiIsImExIiwiY2FtbF9jYWxsMyIsImEyIiwiY2FtbF9jYWxsNCIsImEzIiwiZ2xvYmFsX2RhdGEiLCJDb3JlX0hhc2hfc2V0IiwiQ29yZV9MaXN0IiwiQ29yZV9IYXNodGJsIiwiQ29yZV9PcHRpb24iLCJDb3JlIiwiQ29yZV9GbiIsIlBweF9tb2R1bGVfdGltZXJfcnVudGltZSIsIlBweF9iZW5jaF9saWJfQmVuY2htYXJrX2FjY3VtdSIsIkV4cGVjdF90ZXN0X2NvbGxlY3RvciIsIlBweF9pbmxpbmVfdGVzdF9saWIiLCJJbmNyX3NlbGVjdCIsIkluY3IiLCJFIiwiaGFzaHRibF9zaXplIiwic2V0dXBfZ2VuZXJhdG9yIiwiaGFzaGFibGUiLCJjb21wdXRlX291dHB1dCIsIm1ha2VfaW5wdXRfbm9kZSIsIm5lY2Vzc2FyeV9kZXBlbmRlbmNpZXMiLCJtYWtlX2tleV9zdGFsZSIsImtleSIsImlucHV0X25vZGUiLCJpbnB1dF9kZXAiLCJvdXRwdXRfbm9kZSIsImlzX25vd19vYnNlcnZhYmxlIiwicGFyYW0iLCJsIiwidXBkYXRlX29uZSIsImlucHV0Iiwic2VsZWN0ZWQiLCJtYWtlX3N0YWxlIiwiaW5wIiwic2VsZWN0X29uZSIsIkgiLCJtYXRjaCIsImgiLCJzZWxlY3Rfb25lX3ZhbHVlIiwiZGVmYXVsdCIsImRhdGEiLCJzZWxlY3RfbWFueV92YWx1ZXMiLCJzZWxlY3RfbWFueSIsIm9sZF9zZXQiXSwic291cmNlcyI6WyIvYnVpbHRpbi9ibGFja2JveC5tbCIsIi9Vc2Vycy95YW5uaWNrLy5vcGFtL2JvbnNhaS1mcm9udGVuZC9saWIvaW5jcl9zZWxlY3QvaW5jcl9zZWxlY3QubWwi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QSxTQUVOLGlFQUF5RDtBQUFBO0FBQUEsUUQ3SjdEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQzhKRztBQUFBO0FBQUEsRUQ5SkgiLCJzb3VyY2VzQ29udGVudCI6WyIoKiBnZW5lcmF0ZWQgY29kZSAqKSIsIm9wZW4gQ29yZVxuXG5tb2R1bGUgTWFrZSAoSW5jciA6IEluY3JlbWVudGFsLlNfZ2VuKSA9IHN0cnVjdFxuICBtb2R1bGUgRSA9IEluY3IuRXhwZXJ0XG5cbiAgKCogSGFzaHRibCBzdGFydHMgb3V0IGF0IGEgcmlkaWN1bG91cyBzaXplIG9mIDEyOC4gVGhpcyBpcyBhIG1vcmUgcmVhc29uYWJsZSBudW1iZXJcbiAgICAgb2YgYmlucyB0byBoYXZlLiAqKVxuICBsZXQgaGFzaHRibF9zaXplID0gMTBcblxuICAoKiogW3NldHVwX2dlbmVyYXRvcl0gc2V0cyB1cCB0aGUgc3RhZ2VkIGNvbnZlcnNpb24uXG5cbiAgICAgIFtoYXNoYWJsZV0gaXMgdXNlZCB0byBidWlsZCBhIHRhYmxlIG9mIG5lY2Vzc2FyeSBkZXBlbmRlbmNpZXMuIFdlIGRyb3AgdW5uZWNlc3NhcnlcbiAgICAgIGRlcGVuZGVuY2llcyB0byBhbGxvdyB0aGVtIHRvIGJlIGNvbGxlY3RlZC5cblxuICAgICAgW2NvbXB1dGVfb3V0cHV0IGtleV0gcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG91dHB1dCBub2RlIGNvcnJlc3BvbmRpbmcgdG8gW2tleV0uXG4gICAgICBbY29tcHV0ZV9vdXRwdXRdIGlzIGNsb3NlZCBvdmVyIHRoZSBtdXRhYmxlIHN0YXRlIGRldGVybWluaW5nIHRoZSBjdXJyZW50IHZhbHVlIG9mXG4gICAgICB0aGUgc2VsZWN0b3IncyBpbnB1dC5cblxuICAgICAgW21ha2VfaW5wdXRfbm9kZV0gbWFrZXMgc3VyZSB0aGF0IHdoZW4gdGhlIG11dGFibGUgc3RhdGUgaW5zaWRlIFtjb21wdXRlX291dHB1dF0gaXNcbiAgICAgIHVwZGF0ZWQsIHRoZSBjb3JyZXNwb25kaW5nIG5vZGVzIGluIHRoZSBbbmVjZXNzYXJ5X2RlcGVuZGVuY2llc10gdGFibGUgYXJlIG1hZGVcbiAgICAgIHN0YWxlLiAgKilcbiAgbGV0IHNldHVwX2dlbmVyYXRvclxuICAgICAgICAoaGFzaGFibGUgOiAnYSBIYXNodGJsX2ludGYuSGFzaGFibGUudClcbiAgICAgICAgfihjb21wdXRlX291dHB1dCA6ICdhIC0+ICdiKVxuICAgICAgICB+KG1ha2VfaW5wdXRfbm9kZSA6IG1ha2Vfa2V5X3N0YWxlOignYSAtPiB1bml0KSAtPiB1bml0IEluY3IudClcbiAgICA6ICgnYSAtPiAnYiBJbmNyLnQpIFN0YWdlZC50XG4gICAgPVxuICAgIGxldCBuZWNlc3NhcnlfZGVwZW5kZW5jaWVzID0gSGFzaHRibC5Vc2luZ19oYXNoYWJsZS5jcmVhdGUgfnNpemU6aGFzaHRibF9zaXplIH5oYXNoYWJsZSAoKSBpblxuICAgIGxldCAoaW5wdXRfbm9kZSA6IHVuaXQgSW5jci50KSA9XG4gICAgICBsZXQgbWFrZV9rZXlfc3RhbGUga2V5ID1cbiAgICAgICAgSGFzaHRibC5maW5kIG5lY2Vzc2FyeV9kZXBlbmRlbmNpZXMga2V5XG4gICAgICAgIHw+IE9wdGlvbi52YWx1ZSB+ZGVmYXVsdDpbXVxuICAgICAgICB8PiBMaXN0Lml0ZXIgfmY6RS5Ob2RlLm1ha2Vfc3RhbGVcbiAgICAgIGluXG4gICAgICBtYWtlX2lucHV0X25vZGUgfm1ha2Vfa2V5X3N0YWxlXG4gICAgaW5cbiAgICAoKiBTZXQgdGhlIGN1dG9mZiBzbyB0aGF0IHdlIG5ldmVyIHBhc3MgYXV0b21hdGljYWxseSBmcm9tIHRoZSB1cGRhdGUgdG8gdGhlIG5vZGVzLiBXZVxuICAgICAgIHdhbnQgZXZlcnl0aGluZyB0byBnbyB0aHJvdWdoIFttYWtlX2tleV9zdGFsZV0gKilcbiAgICBJbmNyLnNldF9jdXRvZmYgaW5wdXRfbm9kZSBJbmNyLkN1dG9mZi5hbHdheXM7XG4gICAgc3RhZ2UgKGZ1biBrZXkgLT5cbiAgICAgIGxldCBpbnB1dF9kZXAgPSBFLkRlcGVuZGVuY3kuY3JlYXRlIGlucHV0X25vZGUgaW5cbiAgICAgIGxldCByZWMgb3V0cHV0X25vZGUgPSBsYXp5IChcbiAgICAgICAgRS5Ob2RlLmNyZWF0ZVxuICAgICAgICAgIChmdW4gKCkgLT4gY29tcHV0ZV9vdXRwdXQga2V5KVxuICAgICAgICAgIH5vbl9vYnNlcnZhYmlsaXR5X2NoYW5nZTooZnVuIH5pc19ub3dfb2JzZXJ2YWJsZSAtPlxuICAgICAgICAgICAgaWYgaXNfbm93X29ic2VydmFibGUgdGhlblxuICAgICAgICAgICAgICBIYXNodGJsLmFkZF9tdWx0aSBuZWNlc3NhcnlfZGVwZW5kZW5jaWVzIH5rZXkgfmRhdGE6KGZvcmNlIG91dHB1dF9ub2RlKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBIYXNodGJsLmNoYW5nZSBuZWNlc3NhcnlfZGVwZW5kZW5jaWVzIGtleSB+ZjooZnVuY3Rpb25cbiAgICAgICAgICAgICAgICB8IE5vbmUgLT4gTm9uZVxuICAgICAgICAgICAgICAgIHwgU29tZSBsIC0+XG4gICAgICAgICAgICAgICAgICBtYXRjaCBMaXN0LmZpbHRlciBsIH5mOihGbi5ub24gKHBoeXNfZXF1YWwgKGZvcmNlIG91dHB1dF9ub2RlKSkpIHdpdGhcbiAgICAgICAgICAgICAgICAgIHwgW10gLT4gTm9uZVxuICAgICAgICAgICAgICAgICAgfCBsJyAtPiBTb21lIGwnXG4gICAgICAgICAgICAgICkpKVxuICAgICAgaW5cbiAgICAgIGxldCBvdXRwdXRfbm9kZSA9IGZvcmNlIG91dHB1dF9ub2RlIGluXG4gICAgICBFLk5vZGUuYWRkX2RlcGVuZGVuY3kgb3V0cHV0X25vZGUgaW5wdXRfZGVwO1xuICAgICAgRS5Ob2RlLndhdGNoIG91dHB1dF9ub2RlXG4gICAgKVxuXG4gICgqKiBUaGlzIGNyZWF0ZXMgYSB1bml0IGluY3JlbWVudGFsIHRoYXQgZmlyZXMgd2hlbmV2ZXIgdGhlIGlucHV0IGluY3JlbWVudGFsXG4gICAgICBmaXJlcy4gV2hlbiB0aGF0IG9jY3VycywgaXQgdXBkYXRlcyBbc2VsZWN0ZWRdIHRvIG1hdGNoIHRoZSBjdXJyZW50IHZhbHVlIG9mXG4gICAgICBbaW5wdXRdLCBhbmQgY2FsbHMgW21ha2Vfa2V5X3N0YWxlXSBmb3IgYm90aCB0aGUgb2xkIGFuZCBuZXcgdmFsdWUgb2YgdGhlXG4gICAgICBpbmNyZW1lbnRhbC4gKilcbiAgbGV0IHVwZGF0ZV9vbmUgfmlucHV0IH5zZWxlY3RlZCB+bWFrZV9zdGFsZSA9XG4gICAgSW5jci5tYXAgaW5wdXQgfmY6KGZ1biBpbnAgLT5cbiAgICAgIE9wdGlvbi5pdGVyIGlucCB+ZjptYWtlX3N0YWxlO1xuICAgICAgT3B0aW9uLml0ZXIgIXNlbGVjdGVkIH5mOm1ha2Vfc3RhbGU7XG4gICAgICBzZWxlY3RlZCA6PSBpbnBcbiAgICApXG5cbiAgbGV0IHNlbGVjdF9vbmUnXG4gICAgICAgICh0eXBlIGEpXG4gICAgICAgIChtb2R1bGUgSCA6IEhhc2hhYmxlLkNvbW1vbiB3aXRoIHR5cGUgdCA9IGEpXG4gICAgICAgIChpbnB1dCA6IGEgb3B0aW9uIEluY3IudClcbiAgICA9XG4gICAgbGV0IHNlbGVjdGVkID0gcmVmIE5vbmUgaW5cbiAgICBsZXQgY29tcHV0ZV9vdXRwdXQga2V5ID1cbiAgICAgIG1hdGNoICFzZWxlY3RlZCB3aXRoXG4gICAgICB8IE5vbmUgLT4gZmFsc2VcbiAgICAgIHwgU29tZSBrZXknIC0+IEguY29tcGFyZSBrZXkga2V5JyA9IDBcbiAgICBpblxuICAgIGxldCBtYWtlX2lucHV0X25vZGUgfm1ha2Vfa2V5X3N0YWxlID1cbiAgICAgIHVwZGF0ZV9vbmUgfmlucHV0IH5zZWxlY3RlZCB+bWFrZV9zdGFsZTptYWtlX2tleV9zdGFsZVxuICAgIGluXG4gICAgc2V0dXBfZ2VuZXJhdG9yIEguaGFzaGFibGUgfmNvbXB1dGVfb3V0cHV0IH5tYWtlX2lucHV0X25vZGVcblxuICBsZXQgc2VsZWN0X29uZSBoIGlucHV0ID1cbiAgICBzZWxlY3Rfb25lJyBoIChJbmNyLm1hcCB+ZjpPcHRpb24uc29tZSBpbnB1dClcblxuICBsZXQgc2VsZWN0X29uZV92YWx1ZSdcbiAgICAgICAgKHR5cGUgYSlcbiAgICAgICAgKG1vZHVsZSBIIDogSGFzaGFibGUuQ29tbW9uIHdpdGggdHlwZSB0ID0gYSlcbiAgICAgICAgfmRlZmF1bHRcbiAgICAgICAgaW5wdXRcbiAgICA9XG4gICAgbGV0IHNlbGVjdGVkID0gcmVmIE5vbmUgaW5cbiAgICBsZXQgY29tcHV0ZV9vdXRwdXQga2V5ID1cbiAgICAgIG1hdGNoICFzZWxlY3RlZCB3aXRoXG4gICAgICB8IE5vbmUgLT4gZGVmYXVsdFxuICAgICAgfCBTb21lIChrZXknLCBkYXRhKSAtPiBpZiBILmNvbXBhcmUga2V5IGtleScgPSAwIHRoZW4gZGF0YSBlbHNlIGRlZmF1bHRcbiAgICBpblxuICAgIGxldCBtYWtlX2lucHV0X25vZGUgfm1ha2Vfa2V5X3N0YWxlID1cbiAgICAgIHVwZGF0ZV9vbmUgfnNlbGVjdGVkIH5pbnB1dCB+bWFrZV9zdGFsZTooZnVuIChrZXksIF8pIC0+IG1ha2Vfa2V5X3N0YWxlIGtleSlcbiAgICBpblxuICAgIHNldHVwX2dlbmVyYXRvciBILmhhc2hhYmxlIH5jb21wdXRlX291dHB1dCB+bWFrZV9pbnB1dF9ub2RlXG5cbiAgbGV0IHNlbGVjdF9vbmVfdmFsdWUgaCB+ZGVmYXVsdCBpbnB1dCA9XG4gICAgc2VsZWN0X29uZV92YWx1ZScgaCB+ZGVmYXVsdCAoSW5jci5tYXAgfmY6T3B0aW9uLnNvbWUgaW5wdXQpXG5cbiAgbGV0IHNlbGVjdF9tYW55X3ZhbHVlc1xuICAgICAgICAodHlwZSBhKVxuICAgICAgICAobW9kdWxlIEggOiBIYXNoYWJsZS5Db21tb24gd2l0aCB0eXBlIHQgPSBhKVxuICAgICAgICB+ZGVmYXVsdFxuICAgICAgICBpbnB1dFxuICAgID1cbiAgICBsZXQgaGFzaGFibGUgPSBILmhhc2hhYmxlIGluXG4gICAgbGV0IHNlbGVjdGVkID0gSGFzaHRibC5Vc2luZ19oYXNoYWJsZS5jcmVhdGUgfnNpemU6aGFzaHRibF9zaXplIH5oYXNoYWJsZSAoKSBpblxuICAgIGxldCBjb21wdXRlX291dHB1dCBrZXkgPVxuICAgICAgSGFzaHRibC5maW5kIHNlbGVjdGVkIGtleSB8PiBPcHRpb24udmFsdWUgfmRlZmF1bHRcbiAgICBpblxuICAgIGxldCBtYWtlX2lucHV0X25vZGUgfm1ha2Vfa2V5X3N0YWxlID1cbiAgICAgIEluY3IubWFwIGlucHV0IH5mOihmdW4gaW5wIC0+XG4gICAgICAgIEhhc2h0YmwuaXRlcl9rZXlzIHNlbGVjdGVkIH5mOm1ha2Vfa2V5X3N0YWxlO1xuICAgICAgICBIYXNodGJsLmNsZWFyIHNlbGVjdGVkO1xuICAgICAgICBMaXN0Lml0ZXIgaW5wIH5mOihmdW4gKGtleSwgZGF0YSkgLT5cbiAgICAgICAgICBtYWtlX2tleV9zdGFsZSBrZXk7XG4gICAgICAgICAgSGFzaHRibC5zZXQgc2VsZWN0ZWQgfmtleSB+ZGF0YVxuICAgICAgICApKVxuICAgIGluXG4gICAgc2V0dXBfZ2VuZXJhdG9yIGhhc2hhYmxlIH5jb21wdXRlX291dHB1dCB+bWFrZV9pbnB1dF9ub2RlXG5cbiAgbGV0IHNlbGVjdF9tYW55XG4gICAgICAgICh0eXBlIGEpXG4gICAgICAgIChtb2R1bGUgSCA6IEhhc2hhYmxlLkNvbW1vbiB3aXRoIHR5cGUgdCA9IGEpXG4gICAgICAgIGlucHV0XG4gICAgPVxuICAgIGxldCBoYXNoYWJsZSA9IEguaGFzaGFibGUgaW5cbiAgICBsZXQgc2VsZWN0ZWQgPSBIYXNoX3NldC5Vc2luZ19oYXNoYWJsZS5jcmVhdGUgfnNpemU6aGFzaHRibF9zaXplIH5oYXNoYWJsZSAoKSBpblxuICAgIGxldCBjb21wdXRlX291dHB1dCBrZXkgPSBIYXNoX3NldC5tZW0gc2VsZWN0ZWQga2V5IGluXG4gICAgbGV0IG1ha2VfaW5wdXRfbm9kZSB+bWFrZV9rZXlfc3RhbGUgPVxuICAgICAgSW5jci5tYXAgaW5wdXQgfmY6KGZ1biBpbnAgLT5cbiAgICAgICAgbGV0IG9sZF9zZXQgPSBIYXNoX3NldC5jb3B5IHNlbGVjdGVkIGluXG4gICAgICAgIEhhc2hfc2V0LmNsZWFyIHNlbGVjdGVkO1xuXG4gICAgICAgIExpc3QuaXRlciBpbnAgfmY6KGZ1biBrZXkgLT5cbiAgICAgICAgICBpZiBub3QgKEhhc2hfc2V0Lm1lbSBvbGRfc2V0IGtleSkgdGhlblxuICAgICAgICAgICAgbWFrZV9rZXlfc3RhbGUga2V5O1xuICAgICAgICAgIEhhc2hfc2V0LmFkZCBzZWxlY3RlZCBrZXlcbiAgICAgICAgKTtcblxuICAgICAgICBIYXNoX3NldC5pdGVyIG9sZF9zZXQgfmY6KGZ1biBrZXkgLT5cbiAgICAgICAgICBpZiBub3QgKEhhc2hfc2V0Lm1lbSBzZWxlY3RlZCBrZXkpIHRoZW5cbiAgICAgICAgICAgIG1ha2Vfa2V5X3N0YWxlIGtleTtcbiAgICAgICAgKSlcbiAgICBpblxuICAgIHNldHVwX2dlbmVyYXRvciBoYXNoYWJsZSB+Y29tcHV0ZV9vdXRwdXQgfm1ha2VfaW5wdXRfbm9kZVxuZW5kXG5cbiJdLCJpZ25vcmVMaXN0IjpbMF19fV19
